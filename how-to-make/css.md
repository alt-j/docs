в разработке

----

Первые два шага мы уже сделали — [создали новую страницу](new-page.md), [создали новый блок](new-block.md). Вы
тоже сделали? Нет? Ну, и ладно, не настаиваем :)

Предположим, у вас уже есть страница `/pages/test-page/test-page.page.js`, а в ней вы декларировали один только блок
`input`. Выглядит это так. Это и будет стартом для всего, что мы расскажем ниже.

```javascript
module.exports = function (pages) {
    pages.declare('index-page', function (params) {
        var options = params.options;
        return {
            block: 'page',
            title: 'index page',
            styles: [
                {url: options.assetsPath + '.css'}
            ],
            scripts: [
                {url: options.assetsPath + '.js'}
            ],
            body: [
                {block: 'input'}
            ]
        };
    });
}
```

И к этому моменту блок `input` уже имеет bt-шаблоны, файл со стилями, файл с js-поведением.
Если у вас ничего этого нет, вам нужно [сделать какой-нибудь блок](new-block.md), дальше мы будем опираться на него,
как на основу.

Итак, откроем стилевой файл `/blocks/input/input.styl`. Если вы выполнили шаги в
[предыдущем руководстве](new-block.md), то файл у вас выглядит сейчас совершенно бесполезно. У меня, кстати,
там написано вот это:

```css
.input {
    border: 1px solid red;
}
```

И если открытьв браузере страницу `localhost:8080/test/`, то блок `input` выглядит непрезентабельно - текстовое поле
с красной обводкой. Будем это исправлять.

Предположим, дизайнер прислал нам эскиз для этого блока. Вот реальный эскиз из Яндекса.

<img src="http://bevis-ui.github.io/docs/images/input-design.png" width="557" height="539" />








----

### Предварительный план:
1. есть тестовая страница (ссылка) и блок инпут (ссылка) на ней. Если нет - создайте.
2. Стилей на блоке ещё нет. Давайте напишет. Пусть инпут выглядит как на картинке (скрин из яндекс-инпута с крестиком)
3. Изменим структуру: bt: обвязка>инпут+крестик
4. Напишем стили для блока и двух элементов
5. Состояния: _disabled _focused
6. Полпрозрачная рамка (бордер+bg-clip) - только ради хвастовства и показать как хачим ИЕ
7. Как хачим для ИЕ (в ie8 показываем if-else)
8. Нужно два разных вью (найти дизайн инпута, только чуть-чуть другой)? Как?

### В тексте подчеркнуть тезисы:
* Чтобы определить html-структуру блока и задать ему оформление, мы используем параметр `view`.
* Параметр `view` можно задавать только в `btjson`. Мы считаем, что блок не может менять свои представление и html-структуру в браузере. Если это происходит, мы считаем, что блок становится чем-то иным, нежели он есть — становится другим блоком.
* `state` — состояния блока. Использовать их без конкретного view бессмысленно, потому что состояния существуют только в рамках конкретного варианта оформления. Состояния могут меняться прямо на странице в браузере.
* По умолчанию **каждый** `islets`-блок стилизуется с использованием параметра `view` в значении `islet`. У блока устанавливается зависимость от своего `view: islet`.
* Мы пишем стили с использованием [stylus](http://learnboost.github.io/stylus/).
* При формировании стилей для отображения (`view`) блоков, используются `stylus`-миксины. Миксины являются составными фрагментами для формирования оформления тех или иных типов оформления. Миксины расположены в модификаторе `skin`, и подключаются в `view` с помощью `deps`-файлов.
* Приёмы, разрешенные для IE-стилей




----

# Нужны разные отображения?

Предположим, ваш дизайнер для разных форм сайта нарисовал разные текстовые поля.
И предположим, у вас уже есть блок `input`, который мы сверстали в [соседнем документе](new-block.md). Будем решать
задачу на основе этого блока.

Есть смысл сделать два  отдельных представления этого блока, два `view`. У них будут разные стили,
но одинаковое поведение.

Придумаем имена для представлений: `normal` и `active` и добавим поддержку `view` в шаблоны.

Одно из отображений можно сделать умолчательным, например `normal`, потому что именно оно используется
 на всех страницах сайта, а `active` только на одной странице. Умолчательным (по дефолту,
 если говорить на привычном жаргон) означает, что в декларации блока не нужно указывать `view: 'normal'`,
 это вью будет добавляться автоматически.

Правим шаблоны:

* добавляем вызов метода `bt.setDefaultView('input', 'normal')`
* и к имени блока добавляем маску `*`

Было:

```javascript
module.exports = function (bt) {
    bt.match('input', function (ctx) {
        // ...
    });
};
```

Стало:

```javascript
module.exports = function (bt) {
    bt.setDefaultView('input', 'normal'); // Добавил вызов метода
    bt.match('input*', function (ctx) { // Добавил *-маску в имя блока
        // ...
    });
};
```

Теперь шаблон отработает для блока с любым `view`, то есть для любого из нижеописанных вызовов:
```javascript
{
    block: 'input',
    view: 'normal',
    value: 'Hello'
}
// Сгенерит <div class="input_normal"></div>

{
    block: 'input',
    view: 'active',
    value: 'Hello'
}
// Сгенерит <div class="input_active"></div>

{
    block: 'input',
    value: 'Hello'
}
// Сгенерит <div class="input_normal"></div>

// Это при том, что view мы не указывали.
// Дефолтное значение normal подставится автоматически благодаря методу bt.setDefaultView('input', 'normal')
```

Проверям в браузере, так ли это? Нет, не заработало.

Потому что нет зависимостей.

* зависимости для вью

Проверяем: работает. В html выливаются правильные классы.

Теперь расширяем стили

* два файла styl
* селекторы с вью
* общшие стили выносим в миксины скинов.

Проверяем - работает.

